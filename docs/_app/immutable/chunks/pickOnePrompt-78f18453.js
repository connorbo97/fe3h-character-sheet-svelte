import{S as Se,i as ge,s as pe,l as j,r as D,a as J,m as W,n as w,u as L,h as v,c as F,p as M,b as N,J as E,K as $,T as Ce,v as Q,f as K,g as he,t as G,d as de,Y as be,a3 as ve,w as ee,e as te,x as Oe,y as se,z as ke,A as Ee,B as ne,q as ye,E as Ae,C as Ue}from"./index-d5d48e27.js";import{C as Pe}from"./constants-56e6b6a8.js";import{w as x,h as Te,c as le,g as ae,x as je,y as We}from"./weaponLevel-1d872777.js";import{P as z}from"./enums-eee6a708.js";function oe(t,e,s){const i=t.slice();return i[21]=e[s],i[23]=s,i}function ie(t,e,s){const i=t.slice();return i[24]=e[s],i}function re(t){let e,s,i;const c=[t[1]];var r=t[0];function u(o){let m={};for(let C=0;C<c.length;C+=1)m=Ue(m,c[C]);return{props:m}}return r&&(e=new r(u())),{c(){e&&ee(e.$$.fragment),s=te()},l(o){e&&Oe(e.$$.fragment,o),s=te()},m(o,m){e&&se(e,o,m),N(o,s,m),i=!0},p(o,m){const C=m&2?ke(c,[Ee(o[1])]):{};if(r!==(r=o[0])){if(e){he();const y=e;G(y.$$.fragment,1,0,()=>{ne(y,1)}),de()}r?(e=new r(u()),ee(e.$$.fragment),K(e.$$.fragment,1),se(e,s.parentNode,s)):e=null}else r&&e.$set(C)},i(o){i||(e&&K(e.$$.fragment,o),i=!0)},o(o){e&&G(e.$$.fragment,o),i=!1},d(o){o&&v(s),e&&ne(e,o)}}}function ce(t){let e,s,i,c;return{c(){e=j("button"),s=D("Randomize Choices"),this.h()},l(r){e=W(r,"BUTTON",{});var u=w(e);s=L(u,"Randomize Choices"),u.forEach(v),this.h()},h(){ye(e,"align-self","center",!1)},m(r,u){N(r,e,u),E(e,s),i||(c=$(e,"click",t[18]),i=!0)},p:Ae,d(r){r&&v(e),i=!1,c()}}}function ue(t){let e,s=t[21].description+"",i;return{c(){e=j("span"),i=D(s),this.h()},l(c){e=W(c,"SPAN",{class:!0});var r=w(e);i=L(r,s),r.forEach(v),this.h()},h(){M(e,"class","description svelte-2mzsr9")},m(c,r){N(c,e,r),E(e,i)},p(c,r){r&4&&s!==(s=c[21].description+"")&&Q(i,s)},d(c){c&&v(e)}}}function fe(t){let e,s=t[7](t[21].type,t[24])+"",i,c,r;return{c(){e=j("option"),i=D(s),this.h()},l(u){e=W(u,"OPTION",{});var o=w(e);i=L(o,s),o.forEach(v),this.h()},h(){e.__value=c=JSON.stringify(t[24]),e.value=e.__value,e.selected=r=t[4][t[23]]===t[24]},m(u,o){N(u,e,o),E(e,i)},p(u,o){o&4&&s!==(s=u[7](u[21].type,u[24])+"")&&Q(i,s),o&4&&c!==(c=JSON.stringify(u[24]))&&(e.__value=c,e.value=e.__value),o&20&&r!==(r=u[4][u[23]]===u[24])&&(e.selected=r)},d(u){u&&v(e)}}}function me(t){let e,s,i=t[21].type+"",c,r,u,o,m,C,y,O,U,P,_=t[21].description&&ue(t),A=t[21].options,g=[];for(let n=0;n<A.length;n+=1)g[n]=fe(ie(t,A,n));function b(...n){return t[19](t[23],...n)}return{c(){e=j("h2"),s=D("Pick a "),c=D(i),r=J(),_&&_.c(),u=J(),o=j("select"),m=j("option"),C=D("-");for(let n=0;n<g.length;n+=1)g[n].c();O=J(),this.h()},l(n){e=W(n,"H2",{class:!0});var h=w(e);s=L(h,"Pick a "),c=L(h,i),h.forEach(v),r=F(n),_&&_.l(n),u=F(n),o=W(n,"SELECT",{name:!0});var a=w(o);m=W(a,"OPTION",{});var d=w(m);C=L(d,"-"),d.forEach(v);for(let S=0;S<g.length;S+=1)g[S].l(a);a.forEach(v),O=F(n),this.h()},h(){M(e,"class","svelte-2mzsr9"),m.__value=null,m.value=m.__value,M(o,"name",y=t[21].type+t[23])},m(n,h){N(n,e,h),E(e,s),E(e,c),N(n,r,h),_&&_.m(n,h),N(n,u,h),N(n,o,h),E(o,m),E(m,C);for(let a=0;a<g.length;a+=1)g[a].m(o,null);N(n,O,h),U||(P=$(o,"change",b),U=!0)},p(n,h){if(t=n,h&4&&i!==(i=t[21].type+"")&&Q(c,i),t[21].description?_?_.p(t,h):(_=ue(t),_.c(),_.m(u.parentNode,u)):_&&(_.d(1),_=null),h&148){A=t[21].options;let a;for(a=0;a<A.length;a+=1){const d=ie(t,A,a);g[a]?g[a].p(d,h):(g[a]=fe(d),g[a].c(),g[a].m(o,null))}for(;a<g.length;a+=1)g[a].d(1);g.length=A.length}h&4&&y!==(y=t[21].type+t[23])&&M(o,"name",y)},d(n){n&&v(e),n&&v(r),_&&_.d(n),n&&v(u),n&&v(o),be(g,n),n&&v(O),U=!1,P()}}}function we(t){let e,s,i,c,r,u,o,m,C,y,O,U,P,_,A,g,b=t[0]&&re(t),n=!t[5]&&ce(t),h=t[2],a=[];for(let d=0;d<h.length;d+=1)a[d]=me(oe(t,h,d));return{c(){e=j("div"),s=j("h1"),i=D("Making choice(s) because: "),c=j("span"),r=D(t[3]),u=J(),b&&b.c(),o=J(),m=j("div"),n&&n.c(),C=J();for(let d=0;d<a.length;d+=1)a[d].c();y=J(),O=j("button"),U=D("Submit Choices"),this.h()},l(d){e=W(d,"DIV",{class:!0});var S=w(e);s=W(S,"H1",{});var p=w(s);i=L(p,"Making choice(s) because: "),c=W(p,"SPAN",{class:!0});var l=w(c);r=L(l,t[3]),l.forEach(v),p.forEach(v),u=F(S),b&&b.l(S),o=F(S),m=W(S,"DIV",{class:!0});var f=w(m);n&&n.l(f),C=F(f);for(let B=0;B<a.length;B+=1)a[B].l(f);f.forEach(v),y=F(S),O=W(S,"BUTTON",{class:!0});var R=w(O);U=L(R,"Submit Choices"),R.forEach(v),S.forEach(v),this.h()},h(){M(c,"class","reason svelte-2mzsr9"),M(m,"class","content svelte-2mzsr9"),M(O,"class","submit"),O.disabled=P=!t[4].every(_e),M(e,"class","container svelte-2mzsr9")},m(d,S){N(d,e,S),E(e,s),E(s,i),E(s,c),E(c,r),E(e,u),b&&b.m(e,null),E(e,o),E(e,m),n&&n.m(m,null),E(m,C);for(let p=0;p<a.length;p+=1)a[p].m(m,null);E(e,y),E(e,O),E(O,U),_=!0,A||(g=$(O,"click",function(){Ce(t[6])&&t[6].apply(this,arguments)}),A=!0)},p(d,[S]){if(t=d,(!_||S&8)&&Q(r,t[3]),t[0]?b?(b.p(t,S),S&1&&K(b,1)):(b=re(t),b.c(),K(b,1),b.m(e,o)):b&&(he(),G(b,1,1,()=>{b=null}),de()),t[5]?n&&(n.d(1),n=null):n?n.p(t,S):(n=ce(t),n.c(),n.m(m,C)),S&148){h=t[2];let p;for(p=0;p<h.length;p+=1){const l=oe(t,h,p);a[p]?a[p].p(l,S):(a[p]=me(l),a[p].c(),a[p].m(m,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}(!_||S&16&&P!==(P=!t[4].every(_e)))&&(O.disabled=P)},i(d){_||(K(b),_=!0)},o(d){G(b),_=!1},d(d){d&&v(e),b&&b.d(),n&&n.d(),be(a,d),A=!1,g()}}}const _e=t=>t!==null;function Ne(t,e,s){let i,c,r;const{close:u}=ve(Pe.MODAL);let{descriptionElement:o}=e,{descriptionElementProps:m}=e,{pickOne:C=[]}=e,{onSubmit:y=()=>{}}=e,{reason:O}=e,{customCombatArts:U={}}=e,{customCombatSkills:P={}}=e,{customWeapons:_={}}=e,{playerStats:A={}}=e,{onUpdatePlayerStats:g=()=>{}}=e,{onUpdateCustomCombatArts:b=()=>{}}=e,{onUpdateCustomCombatSkills:n=()=>{}}=e,{onUpdateCustomWeapons:h=()=>{}}=e,a=C.map(()=>null);const d=(l,f)=>{switch(l){case z.Weapon:return f.toString()==="DOUBLE_BASE_USES"?"Double the uses of the spell you chose at Reason Level D":x[f.toString()].label+": "+We(x[f.toString()]);case z.CombatArt:return ae[f.toString()].label+": "+je(ae[f.toString()]);case z.CombatSkill:return le[f.toString()].label+": "+le[f.toString()].description;case z.PlayerStat:const R=typeof f=="string"?f:f.stat,B=typeof f=="string"?f:f.value;return`Increase ${Te[R]} to at least ${B}`}},S=()=>{s(4,a=C.map(l=>{const f=Math.floor(Math.random()*l.options.length);return l.options[f]}))},p=(l,f)=>{s(4,a=[...a]),s(4,a[l]=JSON.parse(f.currentTarget.value),a)};return t.$$set=l=>{"descriptionElement"in l&&s(0,o=l.descriptionElement),"descriptionElementProps"in l&&s(1,m=l.descriptionElementProps),"pickOne"in l&&s(2,C=l.pickOne),"onSubmit"in l&&s(8,y=l.onSubmit),"reason"in l&&s(3,O=l.reason),"customCombatArts"in l&&s(9,U=l.customCombatArts),"customCombatSkills"in l&&s(10,P=l.customCombatSkills),"customWeapons"in l&&s(11,_=l.customWeapons),"playerStats"in l&&s(12,A=l.playerStats),"onUpdatePlayerStats"in l&&s(13,g=l.onUpdatePlayerStats),"onUpdateCustomCombatArts"in l&&s(14,b=l.onUpdateCustomCombatArts),"onUpdateCustomCombatSkills"in l&&s(15,n=l.onUpdateCustomCombatSkills),"onUpdateCustomWeapons"in l&&s(16,h=l.onUpdateCustomWeapons)},t.$$.update=()=>{t.$$.dirty&130568&&s(17,i=(l,f)=>{switch(l){case z.Weapon:const R=f.reduce((k,T)=>{var H,I;if(T==="DOUBLE_BASE_USES"){const q=Object.keys(_).find(V=>{var Z;return((Z=_[V])===null||Z===void 0?void 0:Z.reason)==="Unlocked Reason level D"});if(q){const V=((H=k[q])===null||H===void 0?void 0:H.uses)||((I=x[q])===null||I===void 0?void 0:I.uses);k[q]=Object.assign(Object.assign({},k[q]),{uses:V*2})}}else k[T]=Object.assign(Object.assign({},k[T]),{reason:O});return k},Object.assign({},_));h(R);return;case z.CombatArt:const B=f.reduce((k,T)=>(k[T]=Object.assign(Object.assign({},k[T]),{reason:O}),k),Object.assign({},U));b(B);return;case z.CombatSkill:const Y=f.reduce((k,T)=>(k[T]=Object.assign(Object.assign({},k[T]),{reason:O}),k),Object.assign({},P));n(Y);return;case z.PlayerStat:const X=f.reduce((k,T)=>{const{stat:H,value:I}=T;return Math.max(I,k[H])===I&&(k[H]=I),k},Object.assign({},A));g(X);return}}),t.$$.dirty&131348&&s(6,c=()=>{const l=a.reduce((f,R,B)=>{const Y=C[B].type,X=f[Y]||new Set;return X.add(R),f[Y]=X,f},{});Object.keys(l).forEach(f=>i(f,Array.from(l[f]))),y(),u()}),t.$$.dirty&4&&s(5,r=C.some(l=>l.disableRandom))},[o,m,C,O,a,r,c,d,y,U,P,_,A,g,b,n,h,i,S,p]}class ze extends Se{constructor(e){super(),ge(this,e,Ne,we,pe,{descriptionElement:0,descriptionElementProps:1,pickOne:2,onSubmit:8,reason:3,customCombatArts:9,customCombatSkills:10,customWeapons:11,playerStats:12,onUpdatePlayerStats:13,onUpdateCustomCombatArts:14,onUpdateCustomCombatSkills:15,onUpdateCustomWeapons:16})}}export{ze as P};
