import{S as ne,i as ie,s as se,l as R,r as B,a as C,m as A,n as O,u as w,h as g,c as D,q as ae,p as M,b as H,J as _,K as oe,v as re,f as h,t as v,d as P,o as fe,e as j,g as z,Y as ce,T as ue,W as de,C as _e,w as $,x as ee,y as te,z as he,A as me,B as le}from"../../chunks/index-d5d48e27.js";import pe from"./attackEntry.svelte-3be730d3.js";import ge from"./basicEntry.svelte-4272e13c.js";import"../../chunks/SvelteTip-cf62352a.js";import"../../chunks/enums-eee6a708.js";function Y(a,l,s){var i;const t=a.slice();t[11]=l[s],t[14]=s;const e=((i=t[11])==null?void 0:i.type)||"BASIC_ROLL";return t[12]=e,t}function G(a){let l,s;return{c(){l=R("div"),s=B("Loading")},l(t){l=A(t,"DIV",{});var e=O(l);s=w(e,"Loading"),e.forEach(g)},m(t,e){H(t,l,e),_(l,s)},d(t){t&&g(l)}}}function Q(a){let l,s,t=a[0],e=[];for(let n=0;n<t.length;n+=1)e[n]=x(Y(a,t,n));const i=n=>v(e[n],1,1,()=>{e[n]=null});return{c(){for(let n=0;n<e.length;n+=1)e[n].c();l=j()},l(n){for(let r=0;r<e.length;r+=1)e[r].l(n);l=j()},m(n,r){for(let o=0;o<e.length;o+=1)e[o].m(n,r);H(n,l,r),s=!0},p(n,r){if(r&27){t=n[0];let o;for(o=0;o<t.length;o+=1){const u=Y(n,t,o);e[o]?(e[o].p(u,r),h(e[o],1)):(e[o]=x(u),e[o].c(),h(e[o],1),e[o].m(l.parentNode,l))}for(z(),o=t.length;o<e.length;o+=1)i(o);P()}},i(n){if(!s){for(let r=0;r<t.length;r+=1)h(e[r]);s=!0}},o(n){e=e.filter(Boolean);for(let r=0;r<e.length;r+=1)v(e[r]);s=!1},d(n){ce(e,n),n&&g(l)}}}function X(a){let l,s;const t=[a[11]];let e={};for(let i=0;i<t.length;i+=1)e=_e(e,t[i]);return l=new ge({props:e}),{c(){$(l.$$.fragment)},l(i){ee(l.$$.fragment,i)},m(i,n){te(l,i,n),s=!0},p(i,n){const r=n&1?he(t,[me(i[11])]):{};l.$set(r)},i(i){s||(h(l.$$.fragment,i),s=!0)},o(i){v(l.$$.fragment,i),s=!1},d(i){le(l,i)}}}function Z(a){let l,s;return l=new pe({props:{entry:a[11],spoilersOn:a[1]!==1/0&&a[14]>=a[1]&&a[3][a[14]]!==!0,index:a[14],setAlreadyRevealed:a[4]}}),{c(){$(l.$$.fragment)},l(t){ee(l.$$.fragment,t)},m(t,e){te(l,t,e),s=!0},p(t,e){const i={};e&1&&(i.entry=t[11]),e&10&&(i.spoilersOn=t[1]!==1/0&&t[14]>=t[1]&&t[3][t[14]]!==!0),e&16&&(i.setAlreadyRevealed=t[4]),l.$set(i)},i(t){s||(h(l.$$.fragment,t),s=!0)},o(t){v(l.$$.fragment,t),s=!1},d(t){le(l,t)}}}function x(a){let l,s,t,e=a[12]==="BASIC_ROLL"&&X(a),i=a[12]!=="BASIC_ROLL"&&Z(a);return{c(){e&&e.c(),l=C(),i&&i.c(),s=j()},l(n){e&&e.l(n),l=D(n),i&&i.l(n),s=j()},m(n,r){e&&e.m(n,r),H(n,l,r),i&&i.m(n,r),H(n,s,r),t=!0},p(n,r){n[12]==="BASIC_ROLL"?e?(e.p(n,r),r&1&&h(e,1)):(e=X(n),e.c(),h(e,1),e.m(l.parentNode,l)):e&&(z(),v(e,1,1,()=>{e=null}),P()),n[12]!=="BASIC_ROLL"?i?(i.p(n,r),r&1&&h(i,1)):(i=Z(n),i.c(),h(i,1),i.m(s.parentNode,s)):i&&(z(),v(i,1,1,()=>{i=null}),P())},i(n){t||(h(e),h(i),t=!0)},o(n){v(e),v(i),t=!1},d(n){e&&e.d(n),n&&g(l),i&&i.d(n),n&&g(s)}}}function ve(a){var U;let l,s,t,e,i=(((U=a[0])==null?void 0:U.length)||"-")+"",n,r,o,u,y,I,S,b,c,F,p,T,E,J,K,d=!a[0]&&G(),f=a[0]&&Q(a);return{c(){l=R("div"),s=R("div"),t=R("h3"),e=B("Roll Chat (total entries: "),n=B(i),r=B(")"),o=C(),u=R("div"),y=R("span"),I=B("Hide Damage Initially?"),S=C(),b=R("input"),F=C(),p=R("div"),d&&d.c(),T=C(),f&&f.c(),this.h()},l(k){l=A(k,"DIV",{class:!0});var m=O(l);s=A(m,"DIV",{});var L=O(s);t=A(L,"H3",{});var N=O(t);e=w(N,"Roll Chat (total entries: "),n=w(N,i),r=w(N,")"),N.forEach(g),L.forEach(g),o=D(m),u=A(m,"DIV",{});var V=O(u);y=A(V,"SPAN",{});var W=O(y);I=w(W,"Hide Damage Initially?"),W.forEach(g),S=D(V),b=A(V,"INPUT",{type:!0}),V.forEach(g),F=D(m),p=A(m,"DIV",{class:!0,id:!0});var q=O(p);d&&d.l(q),T=D(q),f&&f.l(q),q.forEach(g),m.forEach(g),this.h()},h(){ae(s,"width","100%",!1),M(b,"type","checkbox"),b.checked=c=a[1]!==1/0,M(p,"class","scroll-container svelte-ph62s6"),M(p,"id","test"),M(l,"class","container svelte-ph62s6")},m(k,m){H(k,l,m),_(l,s),_(s,t),_(t,e),_(t,n),_(t,r),_(l,o),_(l,u),_(u,y),_(y,I),_(u,S),_(u,b),_(l,F),_(l,p),d&&d.m(p,null),_(p,T),f&&f.m(p,null),a[9](p),E=!0,J||(K=oe(b,"click",function(){ue(a[2])&&a[2].apply(this,arguments)}),J=!0)},p(k,[m]){var L;a=k,(!E||m&1)&&i!==(i=(((L=a[0])==null?void 0:L.length)||"-")+"")&&re(n,i),(!E||m&2&&c!==(c=a[1]!==1/0))&&(b.checked=c),a[0]?d&&(d.d(1),d=null):d||(d=G(),d.c(),d.m(p,T)),a[0]?f?(f.p(a,m),m&1&&h(f,1)):(f=Q(a),f.c(),h(f,1),f.m(p,null)):f&&(z(),v(f,1,1,()=>{f=null}),P())},i(k){E||(h(f),E=!0)},o(k){v(f),E=!1},d(k){k&&g(l),d&&d.d(),f&&f.d(),a[9](null),J=!1,K()}}}function ye(a,l,s){let{chatEntries:t}=l,{spoilersOn:e}=l,{toggleSpoilersOn:i}=l,{alreadyRevealed:n}=l,{setAlreadyRevealed:r}=l,o,u=-1,y=!1,I,S=new Audio("beep.ogg");fe(()=>{s(7,y=!0),s(8,I=t.length)});function b(c){de[c?"unshift":"push"](()=>{o=c,s(5,o),s(0,t),s(6,u)})}return a.$$set=c=>{"chatEntries"in c&&s(0,t=c.chatEntries),"spoilersOn"in c&&s(1,e=c.spoilersOn),"toggleSpoilersOn"in c&&s(2,i=c.toggleSpoilersOn),"alreadyRevealed"in c&&s(3,n=c.alreadyRevealed),"setAlreadyRevealed"in c&&s(4,r=c.setAlreadyRevealed)},a.$$.update=()=>{a.$$.dirty&97&&o&&u!==(t==null?void 0:t.length)&&(Math.abs((o==null?void 0:o.scrollHeight)-(o==null?void 0:o.scrollTop)-(o==null?void 0:o.clientHeight))<1||u===-1?window.requestAnimationFrame(()=>{s(5,o.scrollTop=o.scrollHeight,o),s(6,u=t.length)}):s(6,u=t.length)),a.$$.dirty&385&&y&&I!==t.length&&S.play()},[t,e,i,n,r,o,u,y,I,b]}class Oe extends ne{constructor(l){super(),ie(this,l,ye,ve,se,{chatEntries:0,spoilersOn:1,toggleSpoilersOn:2,alreadyRevealed:3,setAlreadyRevealed:4})}}export{Oe as default};
