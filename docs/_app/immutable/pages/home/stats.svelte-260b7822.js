import{S as Te,i as Oe,s as Se,l as O,w as me,a as w,r as A,m as S,n as P,x as ge,c as J,u as q,h as m,p as U,b as W,y as be,J as u,K as Q,f as H,t as z,d as Me,B as ye,Y as se,L as Ce,a3 as ne,v as G,ag as re,q as oe,g as je,W as ke}from"../../chunks/index-d5d48e27.js";/* empty css                                                       */import{g as $,b as ie}from"../../chunks/utils-edd64bc1.js";import{C as ue,k as De}from"../../chunks/constants-56e6b6a8.js";import{S as Ie}from"../../chunks/SvelteTip-cf62352a.js";import{C as Ne}from"../../chunks/categoryHeader-f8b5a27f.js";import{b as Z,K as ce,d as Ee,L as x,r as Pe,D as Ue}from"../../chunks/weaponLevel-1d872777.js";import{b as _e}from"../../chunks/enums-eee6a708.js";function fe(t,e,l){const a=t.slice();return a[17]=e[l],a}function he(t,e,l){const a=t.slice();return a[20]=e[l],a}function ve(t){let e,l,a=x[t[20]]+"",_,s,c,o=$(t[0][t[20]])+"",n,g,h,C,d,M;function L(){return t[9](t[20])}function E(...b){return t[10](t[20],...b)}return{c(){e=O("div"),l=O("button"),_=A(a),s=w(),c=O("div"),n=A(o),g=w(),h=O("input"),this.h()},l(b){e=S(b,"DIV",{class:!0});var p=P(e);l=S(p,"BUTTON",{class:!0});var r=P(l);_=q(r,a),r.forEach(m),s=J(p),c=S(p,"DIV",{class:!0});var D=P(c);n=q(D,o),D.forEach(m),g=J(p),h=S(p,"INPUT",{class:!0,type:!0}),p.forEach(m),this.h()},h(){U(l,"class","label svelte-qeu3p9"),U(c,"class","mod svelte-qeu3p9"),U(h,"class","value svelte-qeu3p9"),h.value=C=typeof t[0][t[20]]=="number"?t[0][t[20]]:0,U(h,"type","number"),U(e,"class","stat-container svelte-qeu3p9")},m(b,p){W(b,e,p),u(e,l),u(l,_),u(e,s),u(e,c),u(c,n),u(e,g),u(e,h),d||(M=[Q(l,"click",L),Q(h,"input",E)],d=!0)},p(b,p){t=b,p&1&&a!==(a=x[t[20]]+"")&&G(_,a),p&1&&o!==(o=$(t[0][t[20]])+"")&&G(n,o),p&1&&C!==(C=typeof t[0][t[20]]=="number"?t[0][t[20]]:0)&&h.value!==C&&(h.value=C)},d(b){b&&m(e),d=!1,Ce(M)}}}function de(t){let e,l;return e=new Ie({props:{$$slots:{t:[Ae],default:[Re]},$$scope:{ctx:t}}}),{c(){me(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,_){be(e,a,_),l=!0},p(a,_){const s={};_&8388626&&(s.$$scope={dirty:_,ctx:a}),e.$set(s)},i(a){l||(H(e.$$.fragment,a),l=!0)},o(a){z(e.$$.fragment,a),l=!1},d(a){ye(e,a)}}}function Re(t){let e,l,a,_;return{c(){e=O("div"),l=O("img"),this.h()},l(s){e=S(s,"DIV",{class:!0});var c=P(e);l=S(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach(m),this.h()},h(){var s;U(l,"class","crest-image svelte-qeu3p9"),re(l.src,a=t[4].image)||U(l,"src",a),U(l,"alt",_=(s=t[1])==null?void 0:s.type),oe(l,"border-color",t[1].isMajor?"slateblue":"lightskyblue",!1),U(e,"class","image-container")},m(s,c){W(s,e,c),u(e,l)},p(s,c){var o;c&16&&!re(l.src,a=s[4].image)&&U(l,"src",a),c&2&&_!==(_=(o=s[1])==null?void 0:o.type)&&U(l,"alt",_),c&2&&oe(l,"border-color",s[1].isMajor?"slateblue":"lightskyblue",!1)},d(s){s&&m(e)}}}function Ae(t){var p,r,D,Y;let e,l,a,_,s=((p=t[4])==null?void 0:p.label)+"",c,o,n=_e((r=t[1])==null?void 0:r.isMajor)+"",g,h,C=t[4].activationDC[ie((D=t[1])==null?void 0:D.isMajor)]+"",d,M,L,E=`${(Y=t[4])==null?void 0:Y.description}`,b;return{c(){e=O("div"),l=O("div"),a=O("u"),_=A("Crest of "),c=A(s),o=A(" ("),g=A(n),h=A(`,
							DC `),d=A(C),M=A(")"),L=w(),b=A(E),this.h()},l(j){e=S(j,"DIV",{slot:!0});var R=P(e);l=S(R,"DIV",{});var V=P(l);a=S(V,"U",{});var T=P(a);_=q(T,"Crest of "),c=q(T,s),o=q(T," ("),g=q(T,n),h=q(T,`,
							DC `),d=q(T,C),M=q(T,")"),T.forEach(m),V.forEach(m),L=J(R),b=q(R,E),R.forEach(m),this.h()},h(){U(e,"slot","t")},m(j,R){W(j,e,R),u(e,l),u(l,a),u(a,_),u(a,c),u(a,o),u(a,g),u(a,h),u(a,d),u(a,M),u(e,L),u(e,b)},p(j,R){var V,T,y,v;R&16&&s!==(s=((V=j[4])==null?void 0:V.label)+"")&&G(c,s),R&2&&n!==(n=_e((T=j[1])==null?void 0:T.isMajor)+"")&&G(g,n),R&18&&C!==(C=j[4].activationDC[ie((y=j[1])==null?void 0:y.isMajor)]+"")&&G(d,C),R&16&&E!==(E=`${(v=j[4])==null?void 0:v.description}`)&&G(b,E)},d(j){j&&m(e)}}}function pe(t){var c;let e,l=((c=Ee[t[17]])==null?void 0:c.label)+"",a,_,s;return{c(){e=O("option"),a=A(l),_=w(),this.h()},l(o){e=S(o,"OPTION",{});var n=P(e);a=q(n,l),_=J(n),n.forEach(m),this.h()},h(){var o;e.__value=t[17],e.value=e.__value,e.selected=s=((o=t[1])==null?void 0:o.type)===t[17]},m(o,n){W(o,e,n),u(e,a),u(e,_)},p(o,n){var g;n&2&&s!==(s=((g=o[1])==null?void 0:g.type)===o[17])&&(e.selected=s)},d(o){o&&m(e)}}}function qe(t){var ee;let e,l,a,_,s,c,o,n,g,h,C,d,M,L,E,b="Major",p,r,D="Minor",Y,j,R,V;l=new Ne({props:{label:"Stats"}});let T=Object.keys(t[0]),y=[];for(let i=0;i<T.length;i+=1)y[i]=ve(he(t,T,i));let v=((ee=t[4])==null?void 0:ee.image)&&de(t),K=Object.keys(ce),I=[];for(let i=0;i<K.length;i+=1)I[i]=pe(fe(t,K,i));return{c(){e=O("div"),me(l.$$.fragment),a=w();for(let i=0;i<y.length;i+=1)y[i].c();_=w(),s=O("div"),v&&v.c(),c=w(),o=O("select"),n=O("option"),g=A("Crest?");for(let i=0;i<I.length;i+=1)I[i].c();C=w(),d=O("select"),M=O("option"),L=A("Major/Minor?"),E=O("option"),p=A(b),r=O("option"),Y=A(D),this.h()},l(i){e=S(i,"DIV",{class:!0});var N=P(e);ge(l.$$.fragment,N),a=J(N);for(let F=0;F<y.length;F+=1)y[F].l(N);_=J(N),s=S(N,"DIV",{class:!0});var k=P(s);v&&v.l(k),c=J(k),o=S(k,"SELECT",{name:!0});var f=P(o);n=S(f,"OPTION",{});var B=P(n);g=q(B,"Crest?"),B.forEach(m);for(let F=0;F<I.length;F+=1)I[F].l(f);f.forEach(m),C=J(k),d=S(k,"SELECT",{name:!0});var X=P(d);M=S(X,"OPTION",{});var te=P(M);L=q(te,"Major/Minor?"),te.forEach(m),E=S(X,"OPTION",{});var le=P(E);p=q(le,b),le.forEach(m),r=S(X,"OPTION",{});var ae=P(r);Y=q(ae,D),ae.forEach(m),X.forEach(m),k.forEach(m),N.forEach(m),this.h()},h(){n.__value="",n.value=n.__value,n.selected=h=!t[1].type,U(o,"name","crest"),M.__value="none",M.value=M.__value,E.__value=Z.MAJOR,E.value=E.__value,r.__value=Z.MINOR,r.value=r.__value,U(d,"name","major-minor"),U(s,"class","crest svelte-qeu3p9"),U(e,"class","container svelte-qeu3p9")},m(i,N){W(i,e,N),be(l,e,null),u(e,a);for(let k=0;k<y.length;k+=1)y[k].m(e,null);u(e,_),u(e,s),v&&v.m(s,null),u(s,c),u(s,o),u(o,n),u(n,g);for(let k=0;k<I.length;k+=1)I[k].m(o,null);u(s,C),u(s,d),u(d,M),u(M,L),u(d,E),u(E,p),u(d,r),u(r,Y),t[12](d),j=!0,R||(V=[Q(o,"change",t[11]),Q(d,"change",t[13])],R=!0)},p(i,[N]){var k;if(N&97){T=Object.keys(i[0]);let f;for(f=0;f<T.length;f+=1){const B=he(i,T,f);y[f]?y[f].p(B,N):(y[f]=ve(B),y[f].c(),y[f].m(e,_))}for(;f<y.length;f+=1)y[f].d(1);y.length=T.length}if((k=i[4])!=null&&k.image?v?(v.p(i,N),N&16&&H(v,1)):(v=de(i),v.c(),H(v,1),v.m(s,c)):v&&(je(),z(v,1,1,()=>{v=null}),Me()),(!j||N&2&&h!==(h=!i[1].type))&&(n.selected=h),N&2){K=Object.keys(ce);let f;for(f=0;f<K.length;f+=1){const B=fe(i,K,f);I[f]?I[f].p(B,N):(I[f]=pe(B),I[f].c(),I[f].m(o,null))}for(;f<I.length;f+=1)I[f].d(1);I.length=K.length}},i(i){j||(H(l.$$.fragment,i),H(v),j=!0)},o(i){z(l.$$.fragment,i),z(v),j=!1},d(i){i&&m(e),ye(l),se(y,i),v&&v.d(),se(I,i),t[12](null),R=!1,Ce(V)}}}function Le(t,e,l){let a,_;ne(ue.MODAL);let{stats:s=De}=e,{onUpdatePlayerStats:c}=e,{playerName:o}=e,{playerCrest:n}=e,{onUpdateCrest:g}=e,h={};const C=r=>{const D=$(s[r]);Pe([Ue.d20],{modifier:[D],chatEntryOnRes:{playerName:o,rollName:x[r],rollBonus:D},db:a})},d=(r,D)=>{c(Object.assign(Object.assign({},s),{[r]:isNaN(D)?0:D}))},M=r=>C(r),L=(r,D)=>d(r,parseInt(D.currentTarget.value)),E=r=>{g({type:r.currentTarget.value,isMajor:!1})};function b(r){ke[r?"unshift":"push"](()=>{h=r,l(3,h),l(1,n)})}const p=r=>g({...n,isMajor:r.currentTarget.value==="MAJOR"});return t.$$set=r=>{"stats"in r&&l(0,s=r.stats),"onUpdatePlayerStats"in r&&l(7,c=r.onUpdatePlayerStats),"playerName"in r&&l(8,o=r.playerName),"playerCrest"in r&&l(1,n=r.playerCrest),"onUpdateCrest"in r&&l(2,g=r.onUpdateCrest)},t.$$.update=()=>{t.$$.dirty&10&&h&&l(3,h.value=n.type?n!=null&&n.isMajor?Z.MAJOR:Z.MINOR:"none",h),t.$$.dirty&2&&l(4,_=Ee[n==null?void 0:n.type]||{})},a=ne(ue.DB),[s,n,g,h,_,C,d,c,o,M,L,E,b,p]}class He extends Te{constructor(e){super(),Oe(this,e,Le,qe,Se,{stats:0,onUpdatePlayerStats:7,playerName:8,playerCrest:1,onUpdateCrest:2})}}export{He as default};
