import{S as ae,i as ne,s as oe,l as O,w as j,a as M,r as J,m as D,n as w,x as F,c as N,u as X,h as E,p as W,b as ie,y as G,J as g,f as p,d as Y,t as B,B as H,Y as K,a3 as re,g as Q}from"../../chunks/index-d5d48e27.js";import{C as ce}from"../../chunks/categoryHeader-f8b5a27f.js";import{P as ue}from"../../chunks/pickOnePrompt-78f18453.js";import"../../chunks/SvelteTip-cf62352a.js";import{C as me}from"../../chunks/constants-56e6b6a8.js";import{u as Z,I as x,k as z,v as fe}from"../../chunks/weaponLevel-1d872777.js";import le from"./classesEntry.svelte-3d275f77.js";import"../../chunks/enums-eee6a708.js";import"../../chunks/equippedButton-566568f6.js";import"../../chunks/unlockedButton-2d160252.js";import"../../chunks/descriptionUtils-f5c09904.js";function $(r,s,a){var m;const t=r.slice();t[19]=s[a];const i=t[0].includes(t[19]);t[20]=i;const u=(m=t[2])==null?void 0:m.has(t[19]);return t[21]=u,t}function ee(r,s,a){var m;const t=r.slice();t[19]=s[a];const i=t[0].includes(t[19]);t[20]=i;const u=(m=t[2])==null?void 0:m.has(t[19]);return t[21]=u,t}function te(r){let s,a;return s=new le({props:{isMastered:r[20],isUnlocked:r[21],onToggleClassActive:r[4],onToggleEquipClass:r[3],targetClass:r[19],equippedClass:r[1]}}),{c(){j(s.$$.fragment)},l(t){F(s.$$.fragment,t)},m(t,i){G(s,t,i),a=!0},p(t,i){const u={};i&1&&(u.isMastered=t[20]),i&4&&(u.isUnlocked=t[21]),i&2&&(u.equippedClass=t[1]),s.$set(u)},i(t){a||(p(s.$$.fragment,t),a=!0)},o(t){B(s.$$.fragment,t),a=!1},d(t){H(s,t)}}}function se(r){let s,a;return s=new le({props:{isMastered:r[20],isUnlocked:r[21],onToggleClassActive:r[4],onToggleEquipClass:r[3],targetClass:r[19],equippedClass:r[1]}}),{c(){j(s.$$.fragment)},l(t){F(s.$$.fragment,t)},m(t,i){G(s,t,i),a=!0},p(t,i){const u={};i&1&&(u.isMastered=t[20]),i&4&&(u.isUnlocked=t[21]),i&2&&(u.equippedClass=t[1]),s.$set(u)},i(t){a||(p(s.$$.fragment,t),a=!0)},o(t){B(s.$$.fragment,t),a=!1},d(t){H(s,t)}}}function de(r){let s,a,t,i,u,m,S,h,b,f,k,q,I,v,y;a=new ce({props:{label:"Classes"}});let d=Array.from(Z),o=[];for(let e=0;e<d.length;e+=1)o[e]=te(ee(r,d,e));const V=e=>B(o[e],1,1,()=>{o[e]=null});let U=Array.from(x),c=[];for(let e=0;e<U.length;e+=1)c[e]=se($(r,U,e));const R=e=>B(c[e],1,1,()=>{c[e]=null});return{c(){s=O("div"),j(a.$$.fragment),t=M(),i=O("div"),u=O("div"),m=J("Beginner"),S=M(),h=O("div");for(let e=0;e<o.length;e+=1)o[e].c();b=M(),f=O("div"),k=O("div"),q=J("Intermediate"),I=M(),v=O("div");for(let e=0;e<c.length;e+=1)c[e].c();this.h()},l(e){s=D(e,"DIV",{class:!0});var n=w(s);F(a.$$.fragment,n),t=N(n),i=D(n,"DIV",{class:!0});var l=w(i);u=D(l,"DIV",{class:!0});var C=w(u);m=X(C,"Beginner"),C.forEach(E),S=N(l),h=D(l,"DIV",{class:!0});var _=w(h);for(let T=0;T<o.length;T+=1)o[T].l(_);_.forEach(E),l.forEach(E),b=N(n),f=D(n,"DIV",{class:!0});var L=w(f);k=D(L,"DIV",{class:!0});var P=w(k);q=X(P,"Intermediate"),P.forEach(E),I=N(L),v=D(L,"DIV",{class:!0});var A=w(v);for(let T=0;T<c.length;T+=1)c[T].l(A);A.forEach(E),L.forEach(E),n.forEach(E),this.h()},h(){W(u,"class","label"),W(h,"class","classes-container svelte-1viguxz"),W(i,"class","category"),W(k,"class","label"),W(v,"class","classes-container svelte-1viguxz"),W(f,"class","category"),W(s,"class","container svelte-1viguxz")},m(e,n){ie(e,s,n),G(a,s,null),g(s,t),g(s,i),g(i,u),g(u,m),g(i,S),g(i,h);for(let l=0;l<o.length;l+=1)o[l].m(h,null);g(s,b),g(s,f),g(f,k),g(k,q),g(f,I),g(f,v);for(let l=0;l<c.length;l+=1)c[l].m(v,null);y=!0},p(e,[n]){if(n&31){d=Array.from(Z);let l;for(l=0;l<d.length;l+=1){const C=ee(e,d,l);o[l]?(o[l].p(C,n),p(o[l],1)):(o[l]=te(C),o[l].c(),p(o[l],1),o[l].m(h,null))}for(Q(),l=d.length;l<o.length;l+=1)V(l);Y()}if(n&31){U=Array.from(x);let l;for(l=0;l<U.length;l+=1){const C=$(e,U,l);c[l]?(c[l].p(C,n),p(c[l],1)):(c[l]=se(C),c[l].c(),p(c[l],1),c[l].m(v,null))}for(Q(),l=U.length;l<c.length;l+=1)R(l);Y()}},i(e){if(!y){p(a.$$.fragment,e);for(let n=0;n<d.length;n+=1)p(o[n]);for(let n=0;n<U.length;n+=1)p(c[n]);y=!0}},o(e){B(a.$$.fragment,e),o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)B(o[n]);c=c.filter(Boolean);for(let n=0;n<c.length;n+=1)B(c[n]);y=!1},d(e){e&&E(s),H(a),K(o,e),K(c,e)}}}function Ce(r,s,a){let t;const{open:i}=re(me.MODAL);let{masteredClasses:u}=s,{equippedClass:m}=s,{setEquippedClass:S}=s,{unlockedClasses:h}=s,{onUpdateUnlockedClasses:b}=s,{customCombatSkills:f}=s,{onUpdateCustomCombatSkills:k}=s,{customCombatArts:q}=s,{onUpdateCustomCombatArts:I}=s,{customWeapons:v}=s,{onUpdateCustomWeapons:y}=s,{playerStats:d}=s,{onUpdatePlayerStats:o}=s,V=new Audio("class-change.webm");const U=e=>{m===e?S(""):t.has(e)&&S(e)},c=(e,n)=>{i(ue,{pickOne:z[e].unlocks.pickOne,reason:`Unlocked by obtaining ${fe[e]} class`,customWeapons:v,customCombatArts:q,customCombatSkills:f,onUpdateCustomCombatArts:I,onUpdateCustomCombatSkills:k,onUpdateCustomWeapons:y,playerStats:d,onUpdatePlayerStats:o,onSubmit:n})},R=e=>{if(t.has(e))m===e&&S(""),b(Array.from(t).filter(n=>n!==e));else{V.currentTime=0,V.play();const n=()=>{var l,C;const _=(C=(l=z[e])===null||l===void 0?void 0:l.unlocks)===null||C===void 0?void 0:C.playerStats;if(_){const L=Object.keys(_).reduce((P,A)=>((_==null?void 0:_[A])&&P[A]<((_==null?void 0:_[A])||0)&&(P[A]=_[A]),P),Object.assign({},d));o(L)}b([...Array.from(t),e])};z[e].unlocks.pickOne?c(e,n):n()}};return r.$$set=e=>{"masteredClasses"in e&&a(0,u=e.masteredClasses),"equippedClass"in e&&a(1,m=e.equippedClass),"setEquippedClass"in e&&a(5,S=e.setEquippedClass),"unlockedClasses"in e&&a(6,h=e.unlockedClasses),"onUpdateUnlockedClasses"in e&&a(7,b=e.onUpdateUnlockedClasses),"customCombatSkills"in e&&a(8,f=e.customCombatSkills),"onUpdateCustomCombatSkills"in e&&a(9,k=e.onUpdateCustomCombatSkills),"customCombatArts"in e&&a(10,q=e.customCombatArts),"onUpdateCustomCombatArts"in e&&a(11,I=e.onUpdateCustomCombatArts),"customWeapons"in e&&a(12,v=e.customWeapons),"onUpdateCustomWeapons"in e&&a(13,y=e.onUpdateCustomWeapons),"playerStats"in e&&a(14,d=e.playerStats),"onUpdatePlayerStats"in e&&a(15,o=e.onUpdatePlayerStats)},r.$$.update=()=>{r.$$.dirty&64&&a(2,t=new Set(h))},V.volume=.05,[u,m,t,U,R,S,h,b,f,k,q,I,v,y,d,o]}class Ee extends ae{constructor(s){super(),ne(this,s,Ce,de,oe,{masteredClasses:0,equippedClass:1,setEquippedClass:5,unlockedClasses:6,onUpdateUnlockedClasses:7,customCombatSkills:8,onUpdateCustomCombatSkills:9,customCombatArts:10,onUpdateCustomCombatArts:11,customWeapons:12,onUpdateCustomWeapons:13,playerStats:14,onUpdatePlayerStats:15})}}export{Ee as default};
