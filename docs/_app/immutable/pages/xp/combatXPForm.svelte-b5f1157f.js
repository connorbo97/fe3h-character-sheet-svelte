import{S as Ve,i as Be,s as We,l as r,r as M,a as I,w as Ue,m as f,n as h,u as D,h as i,c as L,x as Fe,q as X,p as B,b as x,J as n,a8 as Oe,y as Ye,K as ae,v as me,aj as De,f as Re,t as ze,B as Ge,Y as He,L as Je,E as je,T as Ke}from"../../chunks/index-d5d48e27.js";import{S as Qe}from"../../chunks/SvelteTip-cf62352a.js";import{v as we,aa as Ce,k as Te,Y as qe,a9 as Ae,z as Ze,f as xe}from"../../chunks/weaponLevel-1d872777.js";import{b as Ie}from"../../chunks/descriptionUtils-f5c09904.js";import"../../chunks/enums-eee6a708.js";function Le(t,e,l){const a=t.slice();return a[19]=e[l],a}function $e(t){let e,l;return{c(){e=r("label"),l=M("Battalion Equipped?"),this.h()},l(a){e=f(a,"LABEL",{for:!0});var o=h(e);l=D(o,"Battalion Equipped?"),o.forEach(i),this.h()},h(){B(e,"for","battalion-equipped")},m(a,o){x(a,e,o),n(e,l)},p:je,d(a){a&&i(e)}}}function et(t){let e,l;return{c(){e=r("div"),l=M("If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),this.h()},l(a){e=f(a,"DIV",{slot:!0});var o=h(e);l=D(o,"If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),o.forEach(i),this.h()},h(){B(e,"slot","t"),X(e,"white-space","break-spaces",!1)},m(a,o){x(a,e,o),n(e,l)},p:je,d(a){a&&i(e)}}}function Se(t){let e,l,a=Math.round(t[1]/Object.keys(t[3]).length*(t[6][t[19]]||1))+"",o;return{c(){e=r("div"),l=M("+"),o=M(a)},l(s){e=f(s,"DIV",{});var _=h(e);l=D(_,"+"),o=D(_,a),_.forEach(i)},m(s,_){x(s,e,_),n(e,l),n(e,o)},p(s,_){_&74&&a!==(a=Math.round(s[1]/Object.keys(s[3]).length*(s[6][s[19]]||1))+"")&&me(o,a)},d(s){s&&i(e)}}}function Ne(t){let e,l,a,o,s,_,T=Ze[t[19]]+"",q,j,S,A,N;function W(){return t[16](t[19])}let d=t[3][t[19]]&&Se(t);return{c(){e=r("div"),l=r("div"),a=r("input"),s=I(),_=r("label"),q=M(T),j=I(),d&&d.c(),S=I(),this.h()},l(c){e=f(c,"DIV",{});var v=h(e);l=f(v,"DIV",{});var P=h(l);a=f(P,"INPUT",{type:!0,name:!0,id:!0}),s=L(P),_=f(P,"LABEL",{for:!0});var G=h(_);q=D(G,T),G.forEach(i),P.forEach(i),j=L(v),d&&d.l(v),S=L(v),v.forEach(i),this.h()},h(){B(a,"type","checkbox"),B(a,"name","weapon"),B(a,"id",t[19]),a.checked=o=t[3][t[19]],B(_,"for",t[19]),X(l,"display","flex",!1),X(e,"display","flex",!1),X(e,"flex-direction","column",!1),X(e,"align-items","center",!1)},m(c,v){x(c,e,v),n(e,l),n(l,a),n(l,s),n(l,_),n(_,q),n(e,j),d&&d.m(e,null),n(e,S),A||(N=ae(a,"click",W),A=!0)},p(c,v){t=c,v&8&&o!==(o=t[3][t[19]])&&(a.checked=o),t[3][t[19]]?d?d.p(t,v):(d=Se(t),d.c(),d.m(e,S)):d&&(d.d(1),d=null)},d(c){c&&i(e),d&&d.d(),A=!1,N()}}}function Me(t){let e,l=Ie(t[4],{prefix:"Extra XP from equipped class:"})+"",a;return{c(){e=r("div"),a=M(l)},l(o){e=f(o,"DIV",{});var s=h(e);a=D(s,l),s.forEach(i)},m(o,s){x(o,e,s),n(e,a)},p(o,s){s&16&&l!==(l=Ie(o[4],{prefix:"Extra XP from equipped class:"})+"")&&me(a,l)},d(o){o&&i(e)}}}function tt(t){let e,l,a,o,s,_,T,q,j,S,A,N=(we[t[0]]||"None")+"",W,d,c,v,P,G,U,$,F,u,R,g,m,p,O,z,ee,te,K,Y,V,H,ue,ne,pe,J,he,oe,Q,_e,be;u=new Qe({props:{$$slots:{t:[et],default:[$e]},$$scope:{ctx:t}}});let Z=Ce,k=[];for(let b=0;b<Z.length;b+=1)k[b]=Ne(Le(t,Z,b));let y=t[5]&&Me(t);return{c(){e=r("div"),l=r("div"),a=r("span"),o=r("u"),s=M("Combat XP"),_=I(),T=r("span"),q=r("div"),j=M("Equipped Class:"),S=I(),A=r("b"),W=M(N),d=I(),c=r("span"),v=r("div"),P=M("Total XP for the Combat:"),G=I(),U=r("input"),$=I(),F=r("span"),Ue(u.$$.fragment),R=I(),g=r("input"),m=I(),p=r("div"),O=r("fieldset"),z=r("legend"),ee=M("Select all weapons used in the combat"),te=I();for(let b=0;b<k.length;b+=1)k[b].c();K=I(),y&&y.c(),Y=I(),V=r("div"),H=r("button"),ue=M("Add combat XP"),pe=I(),J=r("button"),he=M("Click to clear all"),this.h()},l(b){e=f(b,"DIV",{class:!0});var E=h(e);l=f(E,"DIV",{});var w=h(l);a=f(w,"SPAN",{});var C=h(a);o=f(C,"U",{});var le=h(o);s=D(le,"Combat XP"),le.forEach(i),C.forEach(i),_=L(w),T=f(w,"SPAN",{});var se=h(T);q=f(se,"DIV",{});var Ee=h(q);j=D(Ee,"Equipped Class:"),Ee.forEach(i),S=L(se),A=f(se,"B",{});var Pe=h(A);W=D(Pe,N),Pe.forEach(i),se.forEach(i),d=L(w),c=f(w,"SPAN",{});var ie=h(c);v=f(ie,"DIV",{});var ge=h(v);P=D(ge,"Total XP for the Combat:"),ge.forEach(i),G=L(ie),U=f(ie,"INPUT",{type:!0}),ie.forEach(i),$=L(w),F=f(w,"SPAN",{});var re=h(F);Fe(u.$$.fragment,re),R=L(re),g=f(re,"INPUT",{id:!0,type:!0}),re.forEach(i),w.forEach(i),m=L(E),p=f(E,"DIV",{});var fe=h(p);O=f(fe,"FIELDSET",{class:!0});var de=h(O);z=f(de,"LEGEND",{});var Xe=h(z);ee=D(Xe,"Select all weapons used in the combat"),Xe.forEach(i),te=L(de);for(let ve=0;ve<k.length;ve+=1)k[ve].l(de);de.forEach(i),K=L(fe),y&&y.l(fe),fe.forEach(i),Y=L(E),V=f(E,"DIV",{class:!0});var ce=h(V);H=f(ce,"BUTTON",{});var ke=h(H);ue=D(ke,"Add combat XP"),ke.forEach(i),pe=L(ce),J=f(ce,"BUTTON",{});var ye=h(J);he=D(ye,"Click to clear all"),ye.forEach(i),ce.forEach(i),E.forEach(i),this.h()},h(){X(T,"display","flex",!1),X(T,"column-gap","5px",!1),B(U,"type","number"),X(U,"width","30px",!1),X(c,"display","flex",!1),X(c,"column-gap","5px",!1),B(g,"id","battalion-equipped"),B(g,"type","checkbox"),X(F,"display","flex",!1),X(F,"column-gap","5px",!1),X(l,"display","flex",!1),X(l,"flex-direction","column",!1),B(O,"class","svelte-we8b5v"),X(p,"flex","1",!1),X(p,"display","flex",!1),X(p,"flex-direction","column",!1),H.disabled=ne=!Object.keys(t[3]).length,J.disabled=oe=!Object.keys(t[3]).length,B(V,"class","button-container svelte-we8b5v"),B(e,"class","container svelte-we8b5v")},m(b,E){x(b,e,E),n(e,l),n(l,a),n(a,o),n(o,s),n(l,_),n(l,T),n(T,q),n(q,j),n(T,S),n(T,A),n(A,W),n(l,d),n(l,c),n(c,v),n(v,P),n(c,G),n(c,U),Oe(U,t[1]),n(l,$),n(l,F),Ye(u,F,null),n(F,R),n(F,g),g.checked=t[2],n(e,m),n(e,p),n(p,O),n(O,z),n(z,ee),n(O,te);for(let w=0;w<k.length;w+=1)k[w].m(O,null);n(p,K),y&&y.m(p,null),n(e,Y),n(e,V),n(V,H),n(H,ue),n(V,pe),n(V,J),n(J,he),Q=!0,_e||(be=[ae(U,"input",t[14]),ae(g,"change",t[15]),ae(H,"click",function(){Ke(t[7])&&t[7].apply(this,arguments)}),ae(J,"click",t[17])],_e=!0)},p(b,[E]){t=b,(!Q||E&1)&&N!==(N=(we[t[0]]||"None")+"")&&me(W,N),E&2&&De(U.value)!==t[1]&&Oe(U,t[1]);const w={};if(E&4194304&&(w.$$scope={dirty:E,ctx:t}),u.$set(w),E&4&&(g.checked=t[2]),E&74){Z=Ce;let C;for(C=0;C<Z.length;C+=1){const le=Le(t,Z,C);k[C]?k[C].p(le,E):(k[C]=Ne(le),k[C].c(),k[C].m(O,null))}for(;C<k.length;C+=1)k[C].d(1);k.length=Z.length}t[5]?y?y.p(t,E):(y=Me(t),y.c(),y.m(p,null)):y&&(y.d(1),y=null),(!Q||E&8&&ne!==(ne=!Object.keys(t[3]).length))&&(H.disabled=ne),(!Q||E&8&&oe!==(oe=!Object.keys(t[3]).length))&&(J.disabled=oe)},i(b){Q||(Re(u.$$.fragment,b),Q=!0)},o(b){ze(u.$$.fragment,b),Q=!1},d(b){b&&i(e),Ge(u),He(k,b),y&&y.d(),_e=!1,Je(be)}}}function lt(t,e,l){let a,o,s,_;var T=this&&this.__awaiter||function(u,R,g,m){function p(O){return O instanceof g?O:new g(function(z){z(O)})}return new(g||(g=Promise))(function(O,z){function ee(Y){try{K(m.next(Y))}catch(V){z(V)}}function te(Y){try{K(m.throw(Y))}catch(V){z(V)}}function K(Y){Y.done?O(Y.value):p(Y.value).then(ee,te)}K((m=m.apply(u,R||[])).next())})},q,j,S,A;let{equippedClass:N}=e,{weaponXP:W}=e,{onWeaponXpChange:d}=e,c=24,v=!1,P={};function G(){c=De(this.value),l(1,c)}function U(){v=this.checked,l(2,v)}const $=u=>{if(P[u]){const{[u]:R,...g}=P;l(3,P=g)}else l(3,P={...P,[u]:!0})},F=()=>l(3,P={});return t.$$set=u=>{"equippedClass"in u&&l(0,N=u.equippedClass),"weaponXP"in u&&l(8,W=u.weaponXP),"onWeaponXpChange"in u&&l(9,d=u.onWeaponXpChange)},t.$$.update=()=>{t.$$.dirty&3073&&l(4,a=(l(11,j=l(10,q=Te[N])===null||q===void 0?void 0:q.whenEquipped)===null||j===void 0?void 0:j.xpMooch)||{}),t.$$.dirty&12289&&l(6,o=(l(13,A=l(12,S=Te[N])===null||S===void 0?void 0:S.whenEquipped)===null||A===void 0?void 0:A.xpMods)||{}),t.$$.dirty&16&&l(5,s=!!Object.keys(a).length),t.$$.dirty&894&&l(7,_=()=>T(void 0,void 0,void 0,function*(){const u=Object.keys(P),R=u.reduce((m,p)=>(m[p]=Math.round(c/u.length*(o[p]||1)),m),{});s&&Object.keys(a).forEach(m=>R[m]=Math.round(c*a[m]));const g=Object.keys(R);for(const m of g){const p=W[m]||{level:qe.E,total:0,mastered:!1};yield d(R[m],{type:m,curLevel:p.level,curXP:p.total,maxXP:Ae[p.level]})}if(v){const m=xe.LEADERSHIP,p=W[m]||{level:qe.E,total:0,mastered:!1};d(Math.round(c/2),{type:m,curLevel:p.level,curXP:p.total,maxXP:Ae[p.level]})}}))},[N,c,v,P,a,s,o,_,W,d,q,j,S,A,G,U,$,F]}class rt extends Ve{constructor(e){super(),Be(this,e,lt,tt,We,{equippedClass:0,weaponXP:8,onWeaponXpChange:9})}}export{rt as default};
